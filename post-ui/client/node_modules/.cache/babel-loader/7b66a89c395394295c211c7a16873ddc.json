{"ast":null,"code":"var _jsxFileName = \"/home/amit/feed-node/client/src/App.js\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Button } from 'react-bootstrap';\nimport { get, post, upvote } from './api-connect';\nimport dateformat from 'dateformat';\nimport { connect } from 'react-redux';\nimport { request } from './actions';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    };\n    this.handleAddNewPost = this.handleAddNewPost.bind(this);\n    this.addNewPost = this.addNewPost.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const _nextProps$result = nextProps.result,\n          _nextProps$result2 = _nextProps$result === void 0 ? {} : _nextProps$result,\n          success = _nextProps$result2.success,\n          isFetching = _nextProps$result2.isFetching,\n          content = _nextProps$result2.content,\n          method = _nextProps$result2.method;\n\n    if (success && !isFetching) {\n      if (method !== 'get') {\n        get();\n      } else {\n        this.setState({\n          data: content,\n          showInput: false\n        });\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.props.dispatch(request('get'));\n    get();\n  }\n\n  handleAddNewPost() {\n    this.setState({\n      showInput: true\n    });\n  }\n\n  addNewPost() {\n    this.props.dispatch(request('post'));\n    post({\n      name: 'Amit kumar',\n      text: this.state.text\n    });\n  }\n\n  upvotePost(post) {\n    this.props.dispatch(request('put'));\n    upvote(post.id, {\n      upvotes: parseInt(post.upvotes) + 1\n    });\n  }\n\n  handleChange(e) {\n    this.setState({\n      text: e.target.value\n    });\n  }\n\n  render() {\n    if (this.props.result.isFetching) {\n      return 'Loading';\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"POSTS:\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, this.state.data.map((d, i) => {\n      return React.createElement(\"div\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, d.name), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, d.text), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, dateformat(d.createdOn, 'mmm dd, yyyy, hh:MM tt')), React.createElement(Button, {\n        bsStyle: \"link\",\n        onClick: this.upvotePost.bind(this, d),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"\".concat(d.upvotes, \" Upvotes\")));\n    })), !this.state.showInput ? React.createElement(Button, {\n      bsStyle: \"link\",\n      onClick: this.handleAddNewPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Add\") : [React.createElement(\"input\", {\n      key: 0,\n      onChange: this.handleChange,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(Button, {\n      bsStyle: \"link\",\n      key: 1,\n      onClick: this.addNewPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Add Post\")]);\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    result: state.response\n  };\n}\n\nconst mapDispatchToProps = {\n  request\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/amit/feed-node/client/src/App.js"],"names":["React","Component","Button","get","post","upvote","dateformat","connect","request","App","constructor","props","state","data","handleAddNewPost","bind","addNewPost","handleChange","componentWillReceiveProps","nextProps","result","success","isFetching","content","method","setState","showInput","componentDidMount","dispatch","name","text","upvotePost","id","upvotes","parseInt","e","target","value","render","map","d","i","createdOn","mapStateToProps","response","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport { Button } from 'react-bootstrap'\nimport { get, post, upvote } from './api-connect'\nimport dateformat from 'dateformat'\nimport { connect } from 'react-redux';\nimport { request } from './actions'\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      data: []\n    }\n\n    this.handleAddNewPost = this.handleAddNewPost.bind(this)\n    this.addNewPost = this.addNewPost.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { result: { success, isFetching, content, method } = {} } = nextProps\n\n    if (success && !isFetching) {\n      if (method !== 'get') {\n        get()\n      }\n      else {\n        this.setState({ data: content, showInput: false })\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.props.dispatch(request('get'));\n    get()\n  }\n\n  handleAddNewPost() {\n    this.setState({ showInput: true })\n  }\n\n  addNewPost() {\n    this.props.dispatch(request('post'));\n    post({ name: 'Amit kumar', text: this.state.text })\n  }\n\n  upvotePost(post) {\n    this.props.dispatch(request('put'));\n    upvote(post.id, { upvotes: parseInt(post.upvotes) + 1 })\n  }\n\n  handleChange(e) {\n    this.setState({ text: e.target.value })\n  }\n\n  render() {\n    if (this.props.result.isFetching) {\n      return 'Loading'\n    }\n\n    return (\n      <div>\n        <div>POSTS:</div>\n        <div>\n          {this.state.data.map((d, i) => {\n            return (\n              <div key={i}>\n                <span>{d.name}</span>\n                <span>{d.text}</span>\n                <span>\n                  {dateformat(d.createdOn, 'mmm dd, yyyy, hh:MM tt')}\n                </span>\n                <Button bsStyle='link' onClick={this.upvotePost.bind(this, d)}>\n                  {`${d.upvotes} Upvotes`}\n                </Button>\n              </div>\n            )\n          })}\n        </div>\n        {!this.state.showInput ?\n          (<Button bsStyle='link' onClick={this.handleAddNewPost}>Add</Button>) :\n          [<input key={0} onChange={this.handleChange} type='text'></input>,\n          <Button bsStyle='link' key={1} onClick={this.addNewPost}>Add Post</Button>]\n        }\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    result: state.response\n  };\n}\n\nconst mapDispatchToProps = {\n  request\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}