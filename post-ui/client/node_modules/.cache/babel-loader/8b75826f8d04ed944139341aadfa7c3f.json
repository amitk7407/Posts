{"ast":null,"code":"var _jsxFileName = \"/home/amit/feed-node/client/src/App.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Button } from 'react-bootstrap';\nimport APIConnect from './api-connect';\nimport dateformat from 'dateformat';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    };\n    this.handleAddNewPost = this.handleAddNewPost.bind(this);\n    this.addNewPost = this.addNewPost.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const _nextProps$result = nextProps.result,\n          _nextProps$result2 = _nextProps$result === void 0 ? {} : _nextProps$result,\n          success = _nextProps$result2.success,\n          isFetching = _nextProps$result2.isFetching,\n          content = _nextProps$result2.content,\n          method = _nextProps$result2.method;\n\n    if (success && !isFetching) {\n      if (method !== 'get') {\n        this.props.dispatch(APIConnect.get());\n      } else {\n        this.setState({\n          data: content,\n          showInput: false\n        });\n      }\n    } else {\n      this.setState({\n        data: [],\n        showInput: false\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.props.dispatch(APIConnect.get());\n  }\n\n  handleAddNewPost() {\n    this.setState({\n      showInput: true\n    });\n  }\n\n  addNewPost() {\n    this.props.dispatch(APIConnect.post({\n      name: 'Amit kumar',\n      text: this.state.text\n    }));\n  }\n\n  upvotePost(post) {\n    this.props.dispatch(APIConnect.upvote(post.id, {\n      upvotes: parseInt(post.upvotes) + 1\n    }));\n  }\n\n  handleChange(e) {\n    this.setState({\n      text: e.target.value\n    });\n  }\n\n  render() {\n    if (this.props.result.isFetching) {\n      return 'Loading...';\n    }\n\n    if (this.props.result.error) {\n      return 'Error...';\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"POSTS:\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, this.state.data.map((d, i) => {\n      return React.createElement(\"div\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, d.name), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, d.text), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, dateformat(new Date(d.createdOn), 'mmm dd, yyyy, hh:MM tt')), React.createElement(Button, {\n        bsStyle: \"link\",\n        onClick: this.upvotePost.bind(this, d),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"\".concat(d.upvotes, \" Upvotes\")));\n    })), !this.state.showInput ? React.createElement(Button, {\n      bsStyle: \"link\",\n      onClick: this.handleAddNewPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Add\") : [React.createElement(\"input\", {\n      key: 0,\n      onChange: this.handleChange,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(Button, {\n      bsStyle: \"link\",\n      key: 1,\n      onClick: this.addNewPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Add Post\")]);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    result: state.result\n  };\n};\n\nexport default connect(mapStateToProps)(App);","map":{"version":3,"sources":["/home/amit/feed-node/client/src/App.js"],"names":["React","Component","connect","Button","APIConnect","dateformat","App","constructor","props","state","data","handleAddNewPost","bind","addNewPost","handleChange","componentWillReceiveProps","nextProps","result","success","isFetching","content","method","dispatch","get","setState","showInput","componentDidMount","post","name","text","upvotePost","upvote","id","upvotes","parseInt","e","target","value","render","error","map","d","i","Date","createdOn","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport { Button } from 'react-bootstrap'\nimport APIConnect from './api-connect'\nimport dateformat from 'dateformat'\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      data: []\n    }\n\n    this.handleAddNewPost = this.handleAddNewPost.bind(this)\n    this.addNewPost = this.addNewPost.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { result: { success, isFetching, content, method } = {} } = nextProps\n\n    if (success && !isFetching) {\n      if (method !== 'get') {\n        this.props.dispatch(APIConnect.get())\n      }\n      else {\n        this.setState({ data: content, showInput: false })\n      }\n    }\n    else {\n      this.setState({ data: [], showInput: false })\n    }\n  }\n\n  componentDidMount() {\n    this.props.dispatch(APIConnect.get())\n  }\n\n  handleAddNewPost() {\n    this.setState({ showInput: true })\n  }\n\n  addNewPost() {\n    this.props.dispatch(APIConnect.post({ name: 'Amit kumar', text: this.state.text }))\n  }\n\n  upvotePost(post) {\n    this.props.dispatch(APIConnect.upvote(post.id, { upvotes: parseInt(post.upvotes) + 1 }))\n  }\n\n  handleChange(e) {\n    this.setState({ text: e.target.value })\n  }\n\n  render() {\n    if (this.props.result.isFetching) {\n      return 'Loading...'\n    }\n\n    if (this.props.result.error) {\n      return 'Error...'\n    }\n\n    return (\n      <div>\n        <div>POSTS:</div>\n        <div>\n          {this.state.data.map((d, i) => {\n            return (\n              <div key={i}>\n                <span>{d.name}</span>\n                <span>{d.text}</span>\n                <span>\n                  {dateformat(new Date(d.createdOn), 'mmm dd, yyyy, hh:MM tt')}\n                </span>\n                <Button bsStyle='link' onClick={this.upvotePost.bind(this, d)}>\n                  {`${d.upvotes} Upvotes`}\n                </Button>\n              </div>\n            )\n          })}\n        </div>\n        {!this.state.showInput ?\n          (<Button bsStyle='link' onClick={this.handleAddNewPost}>Add</Button>) :\n          [<input key={0} onChange={this.handleChange} type='text'></input>,\n          <Button bsStyle='link' key={1} onClick={this.addNewPost}>Add Post</Button>]\n        }\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    result: state.result\n  };\n}\n\n\nexport default connect(mapStateToProps)(App);\n"]},"metadata":{},"sourceType":"module"}